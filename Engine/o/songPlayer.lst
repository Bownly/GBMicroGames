                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12539 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module songPlayer
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _stopSong
                                     12 	.globl _playSong
                                     13 	.globl _hUGE_dosound
                                     14 	.globl _hUGE_init
                                     15 	.globl _add_VBL
                                     16 	.globl _remove_VBL
                                     17 ;--------------------------------------------------------
                                     18 ; special function registers
                                     19 ;--------------------------------------------------------
                                     20 ;--------------------------------------------------------
                                     21 ; ram data
                                     22 ;--------------------------------------------------------
                                     23 	.area _DATA
                                     24 ;--------------------------------------------------------
                                     25 ; ram data
                                     26 ;--------------------------------------------------------
                                     27 	.area _INITIALIZED
                                     28 ;--------------------------------------------------------
                                     29 ; absolute external ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DABS (ABS)
                                     32 ;--------------------------------------------------------
                                     33 ; global & static initialisations
                                     34 ;--------------------------------------------------------
                                     35 	.area _HOME
                                     36 	.area _GSINIT
                                     37 	.area _GSFINAL
                                     38 	.area _GSINIT
                                     39 ;--------------------------------------------------------
                                     40 ; Home
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _HOME
                                     44 ;--------------------------------------------------------
                                     45 ; code
                                     46 ;--------------------------------------------------------
                                     47 	.area _CODE
                                     48 ;Engine/songPlayer.c:9: void playSong(const hUGESong_t * song)
                                     49 ;	---------------------------------
                                     50 ; Function playSong
                                     51 ; ---------------------------------
      000000                         52 _playSong::
      000000 E8 E5                   53 	add	sp, #-27
                                     54 ;Engine/songPlayer.c:11: remove_VBL(hUGE_dosound);
      000002 11r00r00                55 	ld	de, #_hUGE_dosound
      000005 D5                      56 	push	de
      000006 CDr00r00                57 	call	_remove_VBL
      000009 E1                      58 	pop	hl
                                     59 ;Engine/songPlayer.c:12: add_VBL(hUGE_dosound);
      00000A 11r00r00                60 	ld	de, #_hUGE_dosound
      00000D D5                      61 	push	de
      00000E CDr00r00                62 	call	_add_VBL
      000011 E1                      63 	pop	hl
                                     64 ;Engine/songPlayer.c:16: modifiedSong.tempo = song->tempo - mgSpeed;
      000012 F8 00                   65 	ldhl	sp,	#0
      000014 4D                      66 	ld	c, l
      000015 44                      67 	ld	b, h
      000016 F8 1D                   68 	ldhl	sp,	#29
      000018 7E                      69 	ld	a, (hl)
      000019 F8 15                   70 	ldhl	sp,	#21
      00001B 77                      71 	ld	(hl), a
      00001C F8 1E                   72 	ldhl	sp,	#30
      00001E 7E                      73 	ld	a, (hl)
      00001F F8 16                   74 	ldhl	sp,	#22
      000021 32                      75 	ld	(hl-), a
      000022 2A                      76 	ld	a, (hl+)
      000023 5F                      77 	ld	e, a
      000024 56                      78 	ld	d, (hl)
      000025 1A                      79 	ld	a, (de)
      000026 21r00r00                80 	ld	hl, #_mgSpeed
      000029 96                      81 	sub	a, (hl)
      00002A 02                      82 	ld	(bc), a
                                     83 ;Engine/songPlayer.c:17: modifiedSong.order_cnt = song->order_cnt;
      00002B F8 00                   84 	ldhl	sp,	#0
      00002D 7D                      85 	ld	a, l
      00002E 54                      86 	ld	d, h
      00002F F8 17                   87 	ldhl	sp,	#23
      000031 22                      88 	ld	(hl+), a
      000032 7A                      89 	ld	a, d
      000033 32                      90 	ld	(hl-), a
      000034 2A                      91 	ld	a, (hl+)
      000035 4F                      92 	ld	c, a
      000036 46                      93 	ld	b, (hl)
      000037 03                      94 	inc	bc
      000038 F8 15                   95 	ldhl	sp,	#21
      00003A 2A                      96 	ld	a, (hl+)
      00003B 66                      97 	ld	h, (hl)
                                     98 ;	spillPairReg hl
                                     99 ;	spillPairReg hl
      00003C 6F                     100 	ld	l, a
                                    101 ;	spillPairReg hl
                                    102 ;	spillPairReg hl
      00003D 23                     103 	inc	hl
      00003E 5D                     104 	ld	e, l
      00003F 54                     105 	ld	d, h
      000040 1A                     106 	ld	a, (de)
      000041 F8 19                  107 	ldhl	sp,	#25
      000043 22                     108 	ld	(hl+), a
      000044 13                     109 	inc	de
      000045 1A                     110 	ld	a, (de)
      000046 77                     111 	ld	(hl), a
      000047 F8 19                  112 	ldhl	sp,	#25
      000049 2A                     113 	ld	a, (hl+)
      00004A 02                     114 	ld	(bc), a
      00004B 03                     115 	inc	bc
      00004C 7E                     116 	ld	a, (hl)
      00004D 02                     117 	ld	(bc), a
                                    118 ;Engine/songPlayer.c:18: modifiedSong.order1 = song->order1;
      00004E F8 17                  119 	ldhl	sp,	#23
      000050 2A                     120 	ld	a, (hl+)
      000051 4F                     121 	ld	c, a
      000052 46                     122 	ld	b, (hl)
      000053 03                     123 	inc	bc
      000054 03                     124 	inc	bc
      000055 03                     125 	inc	bc
      000056 F8 15                  126 	ldhl	sp,	#21
      000058 2A                     127 	ld	a, (hl+)
      000059 66                     128 	ld	h, (hl)
                                    129 ;	spillPairReg hl
                                    130 ;	spillPairReg hl
      00005A 6F                     131 	ld	l, a
                                    132 ;	spillPairReg hl
                                    133 ;	spillPairReg hl
      00005B 23                     134 	inc	hl
      00005C 23                     135 	inc	hl
      00005D 23                     136 	inc	hl
      00005E 5D                     137 	ld	e, l
      00005F 54                     138 	ld	d, h
      000060 1A                     139 	ld	a, (de)
      000061 F8 19                  140 	ldhl	sp,	#25
      000063 22                     141 	ld	(hl+), a
      000064 13                     142 	inc	de
      000065 1A                     143 	ld	a, (de)
      000066 77                     144 	ld	(hl), a
      000067 F8 19                  145 	ldhl	sp,	#25
      000069 2A                     146 	ld	a, (hl+)
      00006A 02                     147 	ld	(bc), a
      00006B 03                     148 	inc	bc
                                    149 ;Engine/songPlayer.c:19: modifiedSong.order2 = song->order2;
      00006C 3A                     150 	ld	a, (hl-)
      00006D 2B                     151 	dec	hl
      00006E 2B                     152 	dec	hl
      00006F 02                     153 	ld	(bc), a
      000070 2A                     154 	ld	a, (hl+)
      000071 5F                     155 	ld	e, a
      000072 56                     156 	ld	d, (hl)
      000073 21 05 00               157 	ld	hl, #0x0005
      000076 19                     158 	add	hl, de
      000077 E5                     159 	push	hl
      000078 7D                     160 	ld	a, l
      000079 F8 1B                  161 	ldhl	sp,	#27
      00007B 77                     162 	ld	(hl), a
      00007C E1                     163 	pop	hl
      00007D 7C                     164 	ld	a, h
      00007E F8 1A                  165 	ldhl	sp,	#26
      000080 77                     166 	ld	(hl), a
      000081 F8 15                  167 	ldhl	sp,#21
      000083 2A                     168 	ld	a, (hl+)
      000084 5F                     169 	ld	e, a
      000085 56                     170 	ld	d, (hl)
      000086 21 05 00               171 	ld	hl, #0x0005
      000089 19                     172 	add	hl, de
      00008A 2A                     173 	ld	a, (hl+)
      00008B 4F                     174 	ld	c, a
      00008C 46                     175 	ld	b, (hl)
      00008D F8 19                  176 	ldhl	sp,	#25
      00008F 2A                     177 	ld	a,	(hl+)
      000090 66                     178 	ld	h, (hl)
      000091 6F                     179 	ld	l, a
      000092 79                     180 	ld	a, c
      000093 22                     181 	ld	(hl+), a
      000094 70                     182 	ld	(hl), b
                                    183 ;Engine/songPlayer.c:20: modifiedSong.order3 = song->order3;
      000095 F8 17                  184 	ldhl	sp,#23
      000097 2A                     185 	ld	a, (hl+)
      000098 5F                     186 	ld	e, a
      000099 56                     187 	ld	d, (hl)
      00009A 21 07 00               188 	ld	hl, #0x0007
      00009D 19                     189 	add	hl, de
      00009E E5                     190 	push	hl
      00009F 7D                     191 	ld	a, l
      0000A0 F8 1B                  192 	ldhl	sp,	#27
      0000A2 77                     193 	ld	(hl), a
      0000A3 E1                     194 	pop	hl
      0000A4 7C                     195 	ld	a, h
      0000A5 F8 1A                  196 	ldhl	sp,	#26
      0000A7 77                     197 	ld	(hl), a
      0000A8 F8 15                  198 	ldhl	sp,#21
      0000AA 2A                     199 	ld	a, (hl+)
      0000AB 5F                     200 	ld	e, a
      0000AC 56                     201 	ld	d, (hl)
      0000AD 21 07 00               202 	ld	hl, #0x0007
      0000B0 19                     203 	add	hl, de
      0000B1 2A                     204 	ld	a, (hl+)
      0000B2 4F                     205 	ld	c, a
      0000B3 46                     206 	ld	b, (hl)
      0000B4 F8 19                  207 	ldhl	sp,	#25
      0000B6 2A                     208 	ld	a,	(hl+)
      0000B7 66                     209 	ld	h, (hl)
      0000B8 6F                     210 	ld	l, a
      0000B9 79                     211 	ld	a, c
      0000BA 22                     212 	ld	(hl+), a
      0000BB 70                     213 	ld	(hl), b
                                    214 ;Engine/songPlayer.c:21: modifiedSong.order4 = song->order4;
      0000BC F8 17                  215 	ldhl	sp,#23
      0000BE 2A                     216 	ld	a, (hl+)
      0000BF 5F                     217 	ld	e, a
      0000C0 56                     218 	ld	d, (hl)
      0000C1 21 09 00               219 	ld	hl, #0x0009
      0000C4 19                     220 	add	hl, de
      0000C5 E5                     221 	push	hl
      0000C6 7D                     222 	ld	a, l
      0000C7 F8 1B                  223 	ldhl	sp,	#27
      0000C9 77                     224 	ld	(hl), a
      0000CA E1                     225 	pop	hl
      0000CB 7C                     226 	ld	a, h
      0000CC F8 1A                  227 	ldhl	sp,	#26
      0000CE 77                     228 	ld	(hl), a
      0000CF F8 15                  229 	ldhl	sp,#21
      0000D1 2A                     230 	ld	a, (hl+)
      0000D2 5F                     231 	ld	e, a
      0000D3 56                     232 	ld	d, (hl)
      0000D4 21 09 00               233 	ld	hl, #0x0009
      0000D7 19                     234 	add	hl, de
      0000D8 2A                     235 	ld	a, (hl+)
      0000D9 4F                     236 	ld	c, a
      0000DA 46                     237 	ld	b, (hl)
      0000DB F8 19                  238 	ldhl	sp,	#25
      0000DD 2A                     239 	ld	a,	(hl+)
      0000DE 66                     240 	ld	h, (hl)
      0000DF 6F                     241 	ld	l, a
      0000E0 79                     242 	ld	a, c
      0000E1 22                     243 	ld	(hl+), a
      0000E2 70                     244 	ld	(hl), b
                                    245 ;Engine/songPlayer.c:22: modifiedSong.duty_instruments = song->duty_instruments;
      0000E3 F8 17                  246 	ldhl	sp,#23
      0000E5 2A                     247 	ld	a, (hl+)
      0000E6 5F                     248 	ld	e, a
      0000E7 56                     249 	ld	d, (hl)
      0000E8 21 0B 00               250 	ld	hl, #0x000b
      0000EB 19                     251 	add	hl, de
      0000EC E5                     252 	push	hl
      0000ED 7D                     253 	ld	a, l
      0000EE F8 1B                  254 	ldhl	sp,	#27
      0000F0 77                     255 	ld	(hl), a
      0000F1 E1                     256 	pop	hl
      0000F2 7C                     257 	ld	a, h
      0000F3 F8 1A                  258 	ldhl	sp,	#26
      0000F5 77                     259 	ld	(hl), a
      0000F6 F8 15                  260 	ldhl	sp,#21
      0000F8 2A                     261 	ld	a, (hl+)
      0000F9 5F                     262 	ld	e, a
      0000FA 56                     263 	ld	d, (hl)
      0000FB 21 0B 00               264 	ld	hl, #0x000b
      0000FE 19                     265 	add	hl, de
      0000FF 2A                     266 	ld	a, (hl+)
      000100 4F                     267 	ld	c, a
      000101 46                     268 	ld	b, (hl)
      000102 F8 19                  269 	ldhl	sp,	#25
      000104 2A                     270 	ld	a,	(hl+)
      000105 66                     271 	ld	h, (hl)
      000106 6F                     272 	ld	l, a
      000107 79                     273 	ld	a, c
      000108 22                     274 	ld	(hl+), a
      000109 70                     275 	ld	(hl), b
                                    276 ;Engine/songPlayer.c:23: modifiedSong.wave_instruments = song->wave_instruments;
      00010A F8 17                  277 	ldhl	sp,#23
      00010C 2A                     278 	ld	a, (hl+)
      00010D 5F                     279 	ld	e, a
      00010E 56                     280 	ld	d, (hl)
      00010F 21 0D 00               281 	ld	hl, #0x000d
      000112 19                     282 	add	hl, de
      000113 E5                     283 	push	hl
      000114 7D                     284 	ld	a, l
      000115 F8 1B                  285 	ldhl	sp,	#27
      000117 77                     286 	ld	(hl), a
      000118 E1                     287 	pop	hl
      000119 7C                     288 	ld	a, h
      00011A F8 1A                  289 	ldhl	sp,	#26
      00011C 77                     290 	ld	(hl), a
      00011D F8 15                  291 	ldhl	sp,#21
      00011F 2A                     292 	ld	a, (hl+)
      000120 5F                     293 	ld	e, a
      000121 56                     294 	ld	d, (hl)
      000122 21 0D 00               295 	ld	hl, #0x000d
      000125 19                     296 	add	hl, de
      000126 2A                     297 	ld	a, (hl+)
      000127 4F                     298 	ld	c, a
      000128 46                     299 	ld	b, (hl)
      000129 F8 19                  300 	ldhl	sp,	#25
      00012B 2A                     301 	ld	a,	(hl+)
      00012C 66                     302 	ld	h, (hl)
      00012D 6F                     303 	ld	l, a
      00012E 79                     304 	ld	a, c
      00012F 22                     305 	ld	(hl+), a
      000130 70                     306 	ld	(hl), b
                                    307 ;Engine/songPlayer.c:24: modifiedSong.noise_instruments = song->noise_instruments;
      000131 F8 17                  308 	ldhl	sp,#23
      000133 2A                     309 	ld	a, (hl+)
      000134 5F                     310 	ld	e, a
      000135 56                     311 	ld	d, (hl)
      000136 21 0F 00               312 	ld	hl, #0x000f
      000139 19                     313 	add	hl, de
      00013A E5                     314 	push	hl
      00013B 7D                     315 	ld	a, l
      00013C F8 1B                  316 	ldhl	sp,	#27
      00013E 77                     317 	ld	(hl), a
      00013F E1                     318 	pop	hl
      000140 7C                     319 	ld	a, h
      000141 F8 1A                  320 	ldhl	sp,	#26
      000143 77                     321 	ld	(hl), a
      000144 F8 15                  322 	ldhl	sp,#21
      000146 2A                     323 	ld	a, (hl+)
      000147 5F                     324 	ld	e, a
      000148 56                     325 	ld	d, (hl)
      000149 21 0F 00               326 	ld	hl, #0x000f
      00014C 19                     327 	add	hl, de
      00014D 2A                     328 	ld	a, (hl+)
      00014E 4F                     329 	ld	c, a
      00014F 46                     330 	ld	b, (hl)
      000150 F8 19                  331 	ldhl	sp,	#25
      000152 2A                     332 	ld	a,	(hl+)
      000153 66                     333 	ld	h, (hl)
      000154 6F                     334 	ld	l, a
      000155 79                     335 	ld	a, c
      000156 22                     336 	ld	(hl+), a
      000157 70                     337 	ld	(hl), b
                                    338 ;Engine/songPlayer.c:25: modifiedSong.routines = song->routines;
      000158 F8 17                  339 	ldhl	sp,#23
      00015A 2A                     340 	ld	a, (hl+)
      00015B 5F                     341 	ld	e, a
      00015C 56                     342 	ld	d, (hl)
      00015D 21 11 00               343 	ld	hl, #0x0011
      000160 19                     344 	add	hl, de
      000161 E5                     345 	push	hl
      000162 7D                     346 	ld	a, l
      000163 F8 1B                  347 	ldhl	sp,	#27
      000165 77                     348 	ld	(hl), a
      000166 E1                     349 	pop	hl
      000167 7C                     350 	ld	a, h
      000168 F8 1A                  351 	ldhl	sp,	#26
      00016A 77                     352 	ld	(hl), a
      00016B F8 15                  353 	ldhl	sp,#21
      00016D 2A                     354 	ld	a, (hl+)
      00016E 5F                     355 	ld	e, a
      00016F 56                     356 	ld	d, (hl)
      000170 21 11 00               357 	ld	hl, #0x0011
      000173 19                     358 	add	hl, de
      000174 2A                     359 	ld	a, (hl+)
      000175 4F                     360 	ld	c, a
      000176 46                     361 	ld	b, (hl)
      000177 F8 19                  362 	ldhl	sp,	#25
      000179 2A                     363 	ld	a,	(hl+)
      00017A 66                     364 	ld	h, (hl)
      00017B 6F                     365 	ld	l, a
      00017C 79                     366 	ld	a, c
      00017D 22                     367 	ld	(hl+), a
      00017E 70                     368 	ld	(hl), b
                                    369 ;Engine/songPlayer.c:26: modifiedSong.waves = song->waves;
      00017F F8 17                  370 	ldhl	sp,#23
      000181 2A                     371 	ld	a, (hl+)
      000182 5F                     372 	ld	e, a
      000183 56                     373 	ld	d, (hl)
      000184 21 13 00               374 	ld	hl, #0x0013
      000187 19                     375 	add	hl, de
      000188 E5                     376 	push	hl
      000189 7D                     377 	ld	a, l
      00018A F8 1B                  378 	ldhl	sp,	#27
      00018C 77                     379 	ld	(hl), a
      00018D E1                     380 	pop	hl
      00018E 7C                     381 	ld	a, h
      00018F F8 1A                  382 	ldhl	sp,	#26
      000191 77                     383 	ld	(hl), a
      000192 F8 15                  384 	ldhl	sp,#21
      000194 2A                     385 	ld	a, (hl+)
      000195 5F                     386 	ld	e, a
      000196 56                     387 	ld	d, (hl)
      000197 21 13 00               388 	ld	hl, #0x0013
      00019A 19                     389 	add	hl, de
      00019B 2A                     390 	ld	a, (hl+)
      00019C 4F                     391 	ld	c, a
      00019D 46                     392 	ld	b, (hl)
      00019E F8 19                  393 	ldhl	sp,	#25
      0001A0 2A                     394 	ld	a,	(hl+)
      0001A1 66                     395 	ld	h, (hl)
      0001A2 6F                     396 	ld	l, a
      0001A3 79                     397 	ld	a, c
      0001A4 22                     398 	ld	(hl+), a
      0001A5 70                     399 	ld	(hl), b
                                    400 ;Engine/songPlayer.c:28: hUGE_init(&modifiedSong);
      0001A6 F8 17                  401 	ldhl	sp,	#23
      0001A8 2A                     402 	ld	a, (hl+)
      0001A9 4F                     403 	ld	c, a
      0001AA 46                     404 	ld	b, (hl)
      0001AB C5                     405 	push	bc
      0001AC CDr00r00               406 	call	_hUGE_init
      0001AF E1                     407 	pop	hl
                                    408 ;Engine/songPlayer.c:29: }
      0001B0 E8 1B                  409 	add	sp, #27
      0001B2 C9                     410 	ret
                                    411 ;Engine/songPlayer.c:31: void stopSong()
                                    412 ;	---------------------------------
                                    413 ; Function stopSong
                                    414 ; ---------------------------------
      0001B3                        415 _stopSong::
                                    416 ;Engine/songPlayer.c:33: NR12_REG = NR22_REG = NR32_REG = NR42_REG = 0;
      0001B3 AF                     417 	xor	a, a
      0001B4 E0r00                  418 	ldh	(_NR42_REG + 0), a
      0001B6 AF                     419 	xor	a, a
      0001B7 E0r00                  420 	ldh	(_NR32_REG + 0), a
      0001B9 AF                     421 	xor	a, a
      0001BA E0r00                  422 	ldh	(_NR22_REG + 0), a
      0001BC AF                     423 	xor	a, a
      0001BD E0r00                  424 	ldh	(_NR12_REG + 0), a
                                    425 ;Engine/songPlayer.c:34: remove_VBL(hUGE_dosound);
      0001BF 11r00r00               426 	ld	de, #_hUGE_dosound
      0001C2 D5                     427 	push	de
      0001C3 CDr00r00               428 	call	_remove_VBL
      0001C6 E1                     429 	pop	hl
                                    430 ;Engine/songPlayer.c:35: }
      0001C7 C9                     431 	ret
                                    432 	.area _CODE
                                    433 	.area _INITIALIZER
                                    434 	.area _CABS (ABS)
